{
    "$schema": "https://docs.renovatebot.com/renovate-schema.json",
    "extends": ["regexManagers:dockerfileVersions"],
    "timezone": "Europe/Amsterdam",
    "schedule": ["every weekday"],
    "baseBranches": ["main"],
    "gitAuthor": "RenovateBot <bot@me.com>",
    "reviewers": [
      "jp.schoombee@gmail.com"
    ],
    "regexManagers": [

      {
        "fileMatch": ["release\\.version$"],  
        "matchStrings": [
          "client: (?<currentDigest>.+) # renovate: Target=(?<depName>.*)\n"
        ],
        "datasourceTemplate": "git-refs",
        "lookupNameTemplate": "https://jschoombee@github.com/jschoombee/renovate-source-sample.git",
        "currentValueTemplate": "develop",
        "versioningTemplate": "git"
      },

      {
        "fileMatch": ["release\\.version$"],  
        "matchStrings": [
          "services: (?<currentDigest>.+) # renovate: Target=(?<depName>.*)\n"
        ],
        "datasourceTemplate": "git-refs",
        "lookupNameTemplate": "https://jschoombee@github.com/jschoombee/renovate-source-sample.git",
        "currentValueTemplate": "develop",
        "versioningTemplate": "git"
      },
      {
        "fileMatch": ["release\\.version$"],
        "matchStrings": [
          "^(?<currentValue>.+) # renovate: Environment=(?<depName>.*)\n"
        ],
        "datasourceTemplate": "git-tags",
        "versioningTemplate": "semver",
        "lookupNameTemplate": "https://jschoombee@github.com/jschoombee/renovate-source-sample.git"
      }
   
    ],
    "packageRules": [
      {
        "datasources": ["github-releases"],
        "managers": ["regex"],
        "extractVersion": "^(?<version>.*)$"
      },
        {
          "matchDatasources": ["git-refs"],
          "addLabels": ["latest-unstable"]
        },
        {
          "matchDatasources": ["git-tags"],
          "addLabels": ["latest-stable"]
        }
      ]
  }
  
